# 프로그램 구조 - 초보자를 위한 쉬운 설명

> 프로그래밍을 전혀 몰라도 이해할 수 있는 코드 설명서
> 작성일: 2025-11-11

---

## 🏠 프로그램은 집이에요!

우리 프로그램을 집에 비유해볼게요.

```
        [우리 프로그램 집]
              |
    +--------------------+
    |                    |
  현관              관리실
(사용자 화면)    (프로그램 본체)
    |                    |
파일 올리기         AI 작업 처리
결과 보기          데이터 저장
```

---

## 📂 폴더 구조 (집의 방 구조)

### 1. 현관 (templates 폴더)
**역할**: 사용자가 보는 화면

**방 목록**:
- `index.html` - 현관 (메인 화면)
- `login.html` - 대문 (로그인 화면)
- `viewer.html` - 거실 (회의록 보는 방)
- `shared-notes.html` - 공유방 (친구들과 나눈 회의록)

**쉽게 말하면**:
웹사이트의 각 페이지예요. 버튼, 입력창, 예쁜 디자인이 들어있어요.

### 2. 꾸미기 (static 폴더)
**역할**: 화면을 예쁘게 만들기

**구성**:
- `css/style.css` - 색깔, 크기, 배치 (인테리어)
- `js/script.js` - 버튼 동작, 애니메이션 (전기 시스템)
- `js/viewer.js` - 회의록 보는 기능

**쉽게 말하면**:
집을 예쁘게 꾸미는 것처럼, 웹사이트를 예쁘게 만들어요.

### 3. 관리실 (utils 폴더)
**역할**: 실제 일을 하는 곳

**직원들**:
- `stt.py` - 음성 담당 직원 (말을 글자로 변환)
- `db_manager.py` - 창고 관리 직원 (데이터 저장/꺼내기)
- `vector_db_manager.py` - 특수 창고 관리 직원 (AI 검색용)
- `chat_manager.py` - 챗봇 담당 직원 (질문 답변)
- `firebase_auth.py` - 경비 직원 (로그인 체크)
- `user_manager.py` - 회원 관리 직원
- `validation.py` - 검수 담당 직원 (입력값 확인)

### 4. 사장실 (app.py)
**역할**: 모든 걸 총괄하는 본부

**하는 일**:
- 사용자 요청 받기
- 각 직원에게 일 시키기
- 결과 돌려주기

**예시**:
```
사용자: "파일 업로드할게요!"
사장실: "알겠습니다."
       → stt.py에게 "음성 변환해"
       → db_manager.py에게 "결과 저장해"
       → 사용자에게 "완료했어요!"
```

### 5. 창고 (database 폴더)
**역할**: 모든 자료 보관

**창고 종류**:
- `minute_ai.db` - 일반 창고 (회의 정보, 사용자 정보)
- `vector_db/` - 특수 창고 (AI가 검색하는 용도)

### 6. 보관함 (uploads 폴더)
**역할**: 업로드된 파일 저장

**보관 내용**:
- mp3, wav, m4a 음성 파일들
- 파일 이름은 자동으로 암호처럼 변환 (보안)

---

## 🔄 프로그램 흐름 (일의 순서)

### 예시: 회의록 만들기

```
1단계: 사용자가 파일 업로드 버튼 클릭
        ↓
2단계: app.py (사장) "파일 받았어!"
        ↓
3단계: validation.py (검수 담당) "파일 형식 확인 중..."
        ↓
4단계: uploads 폴더에 저장
        ↓
5단계: stt.py (음성 담당) "음성을 글자로 변환 중..."
        ↓ (2-3분 소요)
6단계: db_manager.py (창고 관리) "결과를 데이터베이스에 저장"
        ↓
7단계: vector_db_manager.py (특수 창고) "AI 검색용으로 저장"
        ↓
8단계: app.py (사장) "완료! 사용자에게 알려줘"
        ↓
9단계: viewer.html (거실) 화면에 결과 표시
```

---

## 🎯 각 파일이 하는 일 (쉽게 설명)

### app.py (사장님)
**쉬운 설명**:
식당 주인이라고 생각하면 돼요.
- 손님(사용자) 주문 받기
- 주방(AI)에 요리 시키기
- 음식(결과) 내주기

**주요 기능**:
- 로그인/로그아웃 처리
- 파일 업로드 받기
- 회의록 생성 시작
- 결과 보내주기

### stt.py (통역사)
**쉬운 설명**:
외국인이 말하면 한국어로 통역해주는 사람.
우리는 "소리"를 "글자"로 통역해요.

**주요 기능**:
- 음성 파일 듣기
- 말을 글자로 변환
- 누가 말했는지 구분
- 요약 만들기
- 마인드맵 생성

**예시**:
```
입력: 🔊 "안녕하세요"
처리: 👂 → 🧠 → ✍️
출력: 📝 "안녕하세요"
```

### db_manager.py (도서관 사서)
**쉬운 설명**:
도서관에서 책을 정리하고 찾아주는 사서 선생님.

**주요 기능**:
- 회의록 저장
- 회의록 찾아주기
- 회의록 수정
- 회의록 삭제

**데이터 저장 방식** (표처럼):
```
회의록 목록
+--------+-----------+-----------+
| 번호   | 제목      | 날짜      |
+--------+-----------+-----------+
| 1      | 1차회의   | 2025-11-01|
| 2      | 2차회의   | 2025-11-08|
+--------+-----------+-----------+
```

### vector_db_manager.py (특수 사서)
**쉬운 설명**:
일반 사서는 제목으로 책을 찾지만,
이 사서는 "내용"으로 책을 찾아줘요!

**예시**:
```
질문: "프로젝트 일정에 대한 내용 찾아줘"
      ↓
특수 사서: "일정, 스케줄, 기한 관련 내용 검색 중..."
      ↓
결과: 3개의 관련 대화 찾음!
```

**특별한 점**:
- 똑같은 단어가 아니어도 비슷한 의미면 찾아줘요
- "일정" 검색하면 "스케줄", "기한" 관련 내용도 찾음

### chat_manager.py (안내 데스크)
**쉬운 설명**:
백화점 안내 데스크처럼 질문하면 답해줘요.

**예시 대화**:
```
손님: "화장품 매장 어디 있어요?"
안내: "3층에 있습니다."

사용자: "결정된 사항이 뭐야?"
챗봇: "프로젝트 기한은 11월 15일로 결정되었습니다."
```

**작동 방식**:
1. 질문 받기
2. 회의록에서 관련 내용 검색 (vector_db_manager 도움)
3. AI가 답변 만들기
4. 답변 보내기

### firebase_auth.py (경비원)
**쉬운 설명**:
아파트 경비실처럼 출입을 관리해요.

**하는 일**:
- 신분증(구글 계정) 확인
- 등록된 사람인지 체크
- 출입 허가/거부

**예시**:
```
방문자: "들어가도 되나요?"
경비원: "신분증 확인... OK! 들어가세요."

사용자: "로그인할게요"
프로그램: "구글 계정 확인... 환영합니다!"
```

### user_manager.py (회원 관리)
**쉬운 설명**:
헬스장 회원 관리하듯이 사용자를 관리해요.

**관리 내용**:
- 회원 정보
- 어떤 회의록에 접근 가능한지
- 누구와 공유했는지

### validation.py (검수원)
**쉬운 설명**:
공장에서 불량품 검사하듯이 입력값을 확인해요.

**검사 항목**:
- 파일 형식이 맞나? (mp3, wav, m4a만 허용)
- 제목이 비어있지 않나?
- 날짜 형식이 맞나?

**예시**:
```
❌ 파일: document.pdf → "음성 파일만 가능해요!"
❌ 제목: "" (빈칸) → "제목을 입력해주세요!"
✅ 파일: meeting.mp3 → "통과!"
✅ 제목: "1차회의" → "통과!"
```

---

## 🗄️ 데이터베이스 (창고 시스템)

### SQLite (일반 창고)
**쉬운 설명**:
엑셀 표처럼 데이터를 정리해서 저장해요.

**저장 내용**:

**회의 정보 테이블**:
```
+----------+--------+-----------+----------+
| 회의 ID  | 제목   | 날짜      | 파일명   |
+----------+--------+-----------+----------+
| uuid-123 | 1차회의| 2025-11-01| abc.mp3  |
| uuid-456 | 2차회의| 2025-11-08| def.mp3  |
+----------+--------+-----------+----------+
```

**대화 내용 테이블**:
```
+----------+--------+---------+-----------------+
| 회의 ID  | 화자   | 시간    | 내용            |
+----------+--------+---------+-----------------+
| uuid-123 | 화자1  | 00:00:05| 안녕하세요      |
| uuid-123 | 화자2  | 00:00:10| 네 안녕하세요   |
+----------+--------+---------+-----------------+
```

### ChromaDB (특수 창고)
**쉬운 설명**:
AI가 의미로 검색할 수 있게 특별한 형태로 저장해요.

**일반 검색 vs AI 검색**:
```
일반 검색 (SQLite):
"일정" 검색 → "일정"이라는 단어가 있는 문장만 찾음

AI 검색 (ChromaDB):
"일정" 검색 → "스케줄", "기한", "데드라인" 등
              관련된 의미의 문장도 모두 찾음
```

---

## 🎨 화면 파일 (HTML)

### index.html (메인 화면)
**쉬운 설명**:
집의 거실처럼 모든 것의 중심.

**구성**:
- 파일 업로드 영역
- 내 회의록 목록
- 공유받은 회의록 목록
- 챗봇 창

### viewer.html (회의록 보기)
**쉬운 설명**:
회의록을 예쁘게 보여주는 전시실.

**구성**:
- 탭 메뉴 (대화내용/요약/마인드맵 전환)
- 회의록 내용
- 편집/삭제 버튼
- 공유 버튼

### 화면 전환
```
login.html (로그인)
    ↓ 로그인 성공
index.html (메인)
    ↓ 회의록 클릭
viewer.html (상세보기)
```

---

## 🔌 연결 구조 (누가 누구한테 말하나요?)

```
사용자 (웹 브라우저)
    ↕️ (인터넷)
app.py (사장님)
    ↕️
+---+---+---+---+---+
|   |   |   |   |   |
stt db vector chat firebase
    |   db    |    |
    |   mgr   |    auth
    ↕️   ↕️    ↕️    ↕️
  AI  SQLite ChromaDB Google
```

**흐름**:
1. 사용자 → app.py: "이거 해줘!"
2. app.py → 직원들: "일해!"
3. 직원들 → app.py: "완료!"
4. app.py → 사용자: "됐어요!"

---

## 💡 실제 사용 예시로 이해하기

### 시나리오: "프로젝트 일정 언제야?" 물어보기

**1단계**: 사용자가 챗봇에 질문 입력
```
사용자: "프로젝트 일정 언제야?"
```

**2단계**: script.js (화면 담당)
```
"질문을 app.py한테 보낼게요"
```

**3단계**: app.py (사장)
```
"chat_manager.py한테 넘길게"
```

**4단계**: chat_manager.py (챗봇 담당)
```
"vector_db_manager한테 관련 내용 찾아달라고 해야지"
```

**5단계**: vector_db_manager.py (특수 사서)
```
"'일정', '스케줄' 관련 내용 검색 중..."
"3개 찾았어!"
```

**6단계**: chat_manager.py
```
"AI한테 답변 만들어달라고 해야지"
```

**7단계**: AI (Gemini)
```
"프로젝트 기한은 11월 15일입니다."
```

**8단계**: 화면에 답변 표시
```
챗봇: "프로젝트 기한은 11월 15일입니다."
```

**소요 시간**: 약 3-4초

---

## 🛠️ 문제 해결 (뭔가 안 되면?)

### 상황별 담당자

| 문제 | 담당 파일 | 해결 방법 |
|------|----------|----------|
| 로그인 안 돼요 | firebase_auth.py | 인터넷 연결 확인 |
| 파일 업로드 안 돼요 | app.py, validation.py | 파일 형식 확인 |
| 음성 인식 이상해요 | stt.py | 음질 확인 |
| 챗봇이 답을 못 해요 | chat_manager.py | 회의록에 내용이 있는지 확인 |
| 회의록이 안 보여요 | viewer.html, db_manager.py | 저장이 제대로 됐는지 확인 |

---

## 📝 용어 정리 (어려운 말을 쉽게)

### 프로그래밍 용어
- **함수**: 일을 하는 작은 기계 (예: "더하기 함수"는 숫자를 더해줌)
- **변수**: 값을 담는 상자 (예: `이름 = "철수"`)
- **클래스**: 비슷한 기능을 모아둔 설계도 (예: "자동차 클래스")
- **API**: 프로그램끼리 대화하는 방법

### 데이터 용어
- **데이터베이스**: 자료를 정리해서 보관하는 창고
- **테이블**: 엑셀처럼 표 형태로 정리
- **쿼리**: 데이터베이스에 질문하기 (예: "1차회의 찾아줘")

### 웹 용어
- **HTML**: 웹페이지의 뼈대 (구조)
- **CSS**: 웹페이지의 꾸미기 (색깔, 크기)
- **JavaScript**: 웹페이지의 동작 (버튼 클릭 등)

### AI 용어
- **STT**: 말을 글자로 (Speech To Text)
- **임베딩**: 글을 숫자로 변환 (AI가 이해하기 위해)
- **벡터**: 숫자 배열 (AI가 계산하는 데이터)

---

## 🎯 핵심 요약

### 프로그램 구조를 한 문장으로
"사용자가 파일을 올리면, 여러 직원(모듈)들이 협력해서 AI로 처리한 후 결과를 보여주는 시스템"

### 각 파일의 역할을 비유로
- `app.py` = 사장님 (총괄)
- `stt.py` = 통역사 (소리→글자)
- `db_manager.py` = 사서 (자료 관리)
- `vector_db_manager.py` = 특수 사서 (AI 검색)
- `chat_manager.py` = 안내 데스크 (질문 답변)
- `firebase_auth.py` = 경비원 (출입 관리)
- HTML 파일들 = 전시실 (화면)
- CSS/JS = 인테리어 (꾸미기)

### 데이터 흐름 3단계
1. **입력**: 사용자 → 파일/질문
2. **처리**: AI → 변환/분석
3. **출력**: 결과 → 화면 표시

---

## 🌟 마무리

이 프로그램은 마치 오케스트라처럼,
각 악기(파일)가 맡은 역할을 하면서
아름다운 하모니(회의록)를 만들어내요!

**기억할 것**:
- 각 파일은 하나의 역할을 담당
- 서로 협력해서 큰 일을 완성
- 코드를 몰라도 구조는 이해할 수 있어요!

---

**작성자**: Claude Code
**작성일**: 2025-11-11
**난이도**: ⭐ (초등학생도 이해 가능!)
