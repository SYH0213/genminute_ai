# Minute AI ì‹œìŠ¤í…œ í”„ë¡œì„¸ìŠ¤ ì „ì²´ í”Œë¡œìš°

> ë°œí‘œ ì§ˆì˜ì‘ë‹µ ëŒ€ë¹„ - ì‹œìŠ¤í…œ ë™ì‘ ì›ë¦¬ ì™„ë²½ ê°€ì´ë“œ
> ì‘ì„±ì¼: 2025-11-11

---

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš”](#1-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜-ê°œìš”)
2. [í•µì‹¬ í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš°](#2-í•µì‹¬-í”„ë¡œì„¸ìŠ¤-í”Œë¡œìš°)
3. [ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°](#3-ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°)
4. [AI ëª¨ë¸ ì‚¬ìš© í˜„í™©](#4-ai-ëª¨ë¸-ì‚¬ìš©-í˜„í™©)
5. [ë³´ì•ˆ ë° ê¶Œí•œ ê´€ë¦¬](#5-ë³´ì•ˆ-ë°-ê¶Œí•œ-ê´€ë¦¬)
6. [ì„±ëŠ¥ ìµœì í™” ì „ëµ](#6-ì„±ëŠ¥-ìµœì í™”-ì „ëµ)

---

## 1. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš”

### 1.1 ì „ì²´ ê¸°ìˆ  ìŠ¤íƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend Layer                       â”‚
â”‚  - Vanilla JavaScript (ES6+)                            â”‚
â”‚  - HTML5 + CSS3 (Blue Gradient Theme)                   â”‚
â”‚  - Font Awesome Icons                                    â”‚
â”‚  - Chart.js (í™”ì ì ìœ ìœ¨ ì‹œê°í™”)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Backend Layer                        â”‚
â”‚  - Flask 3.x (Python Web Framework)                     â”‚
â”‚  - Server-Sent Events (SSE) - ì‹¤ì‹œê°„ ì§„í–‰ ìƒíƒœ          â”‚
â”‚  - Firebase Admin SDK (ì¸ì¦)                             â”‚
â”‚  - ffmpeg (ë¹„ë””ì˜¤ â†’ ì˜¤ë””ì˜¤ ë³€í™˜)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI Layer                            â”‚
â”‚  - Gemini 2.5 Pro (STT + ìš”ì•½ ìƒì„±)                      â”‚
â”‚  - Gemini 2.5 Flash (ì±—ë´‡ + ë§ˆì¸ë“œë§µ)                    â”‚
â”‚  - OpenAI text-embedding-3-small (ë²¡í„° ì„ë² ë”©)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Database Layer                        â”‚
â”‚  - SQLite 3 (ê´€ê³„í˜• DB - íšŒì˜ ë©”íƒ€ë°ì´í„°)                â”‚
â”‚  - ChromaDB (ë²¡í„° DB - RAGìš© ë¬¸ì„œ ì €ì¥)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 í•µì‹¬ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
minute_ai/
â”œâ”€â”€ app.py                          # Flask ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ utils/                          # í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ stt.py                      # STT + AI ì²˜ë¦¬
â”‚   â”œâ”€â”€ db_manager.py               # SQLite ê´€ë¦¬
â”‚   â”œâ”€â”€ vector_db_manager.py        # ChromaDB ê´€ë¦¬
â”‚   â”œâ”€â”€ chat_manager.py             # RAG ì±—ë´‡
â”‚   â”œâ”€â”€ firebase_auth.py            # Firebase ì¸ì¦
â”‚   â”œâ”€â”€ user_manager.py             # ì‚¬ìš©ì/ê¶Œí•œ ê´€ë¦¬
â”‚   â”œâ”€â”€ decorators.py               # ì¸ì¦ ë°ì½”ë ˆì´í„°
â”‚   â”œâ”€â”€ analysis.py                 # í™”ì ë¶„ì„
â”‚   â””â”€â”€ validation.py               # ì…ë ¥ ê²€ì¦
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ minute_ai.db                # SQLite DB íŒŒì¼
â”‚   â””â”€â”€ vector_db/                  # ChromaDB ë°ì´í„°
â”œâ”€â”€ uploads/                        # ì—…ë¡œë“œëœ ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ íŒŒì¼
â”œâ”€â”€ templates/                      # Jinja2 HTML í…œí”Œë¦¿
â””â”€â”€ static/                         # CSS, JS, ì´ë¯¸ì§€
```

---

## 2. í•µì‹¬ í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš°

### 2.1 ì „ì²´ íŒŒì´í”„ë¼ì¸ (ì˜¤ë””ì˜¤ â†’ íšŒì˜ë¡)

```
[ì‚¬ìš©ì] â†’ [ì—…ë¡œë“œ] â†’ [STT] â†’ [ì²­í‚¹] â†’ [ìš”ì•½] â†’ [ë§ˆì¸ë“œë§µ] â†’ [íšŒì˜ë¡ ì™„ì„±]
```

### 2.2 ë‹¨ê³„ë³„ ìƒì„¸ í”Œë¡œìš°

#### **STEP 1: íŒŒì¼ ì—…ë¡œë“œ ğŸ“¤**

**ìœ„ì¹˜:** `templates/index.html` + `static/js/script.js`

```
1. ì‚¬ìš©ì íŒŒì¼ ì„ íƒ
   - ë“œë˜ê·¸ì•¤ë“œë¡­ ë˜ëŠ” íŒŒì¼ ì„ íƒ ë²„íŠ¼
   - ì§€ì› í˜•ì‹: .wav, .mp3, .m4a, .flac, .mp4
   - íŒŒì¼ í¬ê¸° ì œí•œ: ì‹¤ì œë¡œëŠ” ì œí•œ ì—†ìŒ (Gemini API ì œí•œì— ë”°ë¦„)

2. ì¤‘ë³µ ì—…ë¡œë“œ ë°©ì§€ (90% íš¨ê³¼)
   - sessionStorageì— 'upload_in_progress' í”Œë˜ê·¸ ì„¤ì •
   - API: /api/check_duplicate (íŒŒì¼ í•´ì‹œ ë¹„êµ)
   - 10ë¶„ ì´ë‚´ ë™ì¼ íŒŒì¼ ì—…ë¡œë“œ ì°¨ë‹¨

3. UUID íŒŒì¼ëª… ìƒì„±
   - ì›ë³¸: "meeting_audio.mp3"
   - ì €ì¥: "a3f7b2c1-4d5e-6f7g-8h9i-0j1k2l3m4n5o.mp3"
   - uploads/ í´ë”ì— ì €ì¥

4. MP4 ë¹„ë””ì˜¤ ì²˜ë¦¬ (ìë™ ê°ì§€)
   - ffmpegë¡œ ì˜¤ë””ì˜¤ íŠ¸ë™ ì¶”ì¶œ
   - ë¹„ë””ì˜¤ëŠ” ë·°ì–´ì—ì„œ ì¬ìƒìš©ìœ¼ë¡œ ì‚¬ìš©
```

**ì½”ë“œ ìœ„ì¹˜:**
- ì—…ë¡œë“œ UI: `templates/index.html:14-26`
- ì—…ë¡œë“œ ì²˜ë¦¬: `app.py:334` `/upload` ë¼ìš°íŠ¸
- ì¤‘ë³µ ë°©ì§€: `app.py:287` `/api/check_duplicate`

---

#### **STEP 2: STT (ìŒì„± ì¸ì‹) ğŸ¤**

**ìœ„ì¹˜:** `utils/stt.py`

```
1. Gemini 2.5 Pro API í˜¸ì¶œ
   - í•¨ìˆ˜: transcribe_audio()
   - ëª¨ë¸: "models/gemini-2.0-flash-exp"
   - íŒŒë¼ë¯¸í„°:
     * enable_speaker_diarization: í™”ì ë¶„ë¦¬ í™œì„±í™”
     * diarization_speaker_count: 2~6ëª… ìë™ ê°ì§€

2. ì‘ë‹µ ì²˜ë¦¬
   - í™”ì ë¼ë²¨: "Speaker 1", "Speaker 2", ...
   - íƒ€ì„ìŠ¤íƒ¬í”„: ì´ˆ ë‹¨ìœ„ (ì˜ˆ: 125.3ì´ˆ)
   - ëŒ€í™” í…ìŠ¤íŠ¸: ì‹¤ì œ ë°œì–¸ ë‚´ìš©

3. ì„¸ê·¸ë¨¼íŠ¸ ì¶”ì¶œ
   [{
     "speaker_label": "1",
     "start_time": 0.0,
     "segment": "ì•ˆë…•í•˜ì„¸ìš”. ì˜¤ëŠ˜ íšŒì˜ë¥¼ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤."
   }, ...]

4. DB ì €ì¥
   - SQLite meeting_dialogues í…Œì´ë¸”ì— ì‚½ì…
   - owner_id: í˜„ì¬ ë¡œê·¸ì¸ ì‚¬ìš©ì (Firebase UID)
```

**ì½”ë“œ ìœ„ì¹˜:**
- STT í•¨ìˆ˜: `utils/stt.py:20` `transcribe_audio()`
- DB ì €ì¥: `utils/db_manager.py:87` `save_meeting_dialogue()`

---

#### **STEP 3: ìŠ¤ë§ˆíŠ¸ ì²­í‚¹ ğŸ“¦**

**ìœ„ì¹˜:** `utils/vector_db_manager.py`

```
1. ì²­í‚¹ ê¸°ì¤€ (3ê°€ì§€ ì¡°ê±´)
   a) í¬ê¸°: 1000ì ì´ˆê³¼
   b) ì‹œê°„ ê°„ê²©: 60ì´ˆ ì´ìƒ ì¹¨ë¬µ (ì£¼ì œ ì „í™˜ ê°€ëŠ¥ì„±)
   c) í™”ì ë³€ê²½: 500ì ì´ìƒ + í™”ì ë³€ê²½

2. ë©”íƒ€ë°ì´í„° ì •ì œ
   - ì›ë³¸: "[Speaker 1, 02:15] ì•ˆë…•í•˜ì„¸ìš”."
   - ì •ì œ (ì •ê·œì‹): "ì•ˆë…•í•˜ì„¸ìš”."
   - ì´ìœ : ë²¡í„° ê²€ìƒ‰ ì‹œ ë¶ˆí•„ìš”í•œ ì •ë³´ ì œê±°

3. ë²¡í„° ì„ë² ë”©
   - OpenAI text-embedding-3-small
   - ê° ì²­í¬ë¥¼ 1536ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜

4. ChromaDB ì €ì¥
   - ì»¬ë ‰ì…˜: meeting_chunks
   - ë©”íƒ€ë°ì´í„°:
     * meeting_id, title, meeting_date
     * start_time, end_time, speaker_count
     * audio_file (ì›ë³¸ íŒŒì¼ëª…)
```

**ì½”ë“œ ìœ„ì¹˜:**
- ìŠ¤ë§ˆíŠ¸ ì²­í‚¹: `utils/vector_db_manager.py:230` `_create_smart_chunks()`
- í…ìŠ¤íŠ¸ ì •ì œ: `utils/vector_db_manager.py:95` `_clean_text()`
- ChromaDB ì¶”ê°€: `utils/vector_db_manager.py:116` `add_meeting_as_chunk()`

---

#### **STEP 4: AI ìš”ì•½ ìƒì„± ğŸ“**

**ìœ„ì¹˜:** `utils/stt.py`

```
1. ì²­í¬ ê¸°ë°˜ ìš”ì•½ (ChromaDBì—ì„œ ì¡°íšŒ)
   - VectorDBManager.get_chunks_by_meeting_id()
   - chunk_index ìˆœì„œëŒ€ë¡œ ì •ë ¬í•˜ì—¬ ì „ì²´ í…ìŠ¤íŠ¸ êµ¬ì„±

2. Gemini 2.5 Pro í”„ë¡¬í”„íŠ¸
   """
   ë‹¤ìŒ íšŒì˜ ëŒ€í™”ë¥¼ ì£¼ì œë³„ë¡œ ë‚˜ëˆ„ì–´ ìš”ì•½í•´ì£¼ì„¸ìš”.
   ê° ì£¼ì œëŠ” '### ì£¼ì œëª…' í˜•ì‹ìœ¼ë¡œ ì‹œì‘í•˜ê³ ,
   í•µì‹¬ ë‚´ìš©ì„ ë¶ˆë¦¿ í¬ì¸íŠ¸ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.
   """

3. ìš”ì•½ ê²°ê³¼ íŒŒì‹±
   - "### " êµ¬ë¶„ìë¡œ ë¶„ë¦¬
   - ê° ì†Œì£¼ì œë¥¼ ë³„ë„ ë¬¸ì„œë¡œ ì €ì¥

4. ChromaDB ì €ì¥
   - ì»¬ë ‰ì…˜: meeting_subtopic
   - ë©”íƒ€ë°ì´í„°:
     * meeting_id, meeting_title, meeting_date
     * main_topic (ì£¼ì œëª…)
     * summary_index (ìˆœì„œ)
```

**ì½”ë“œ ìœ„ì¹˜:**
- ìš”ì•½ ìƒì„±: `utils/stt.py:152` `generate_summary_from_chunks()`
- ChromaDB ì €ì¥: `utils/vector_db_manager.py:311` `add_meeting_as_subtopic()`

---

#### **STEP 5: ë§ˆì¸ë“œë§µ ìƒì„± ğŸ—ºï¸**

**ìœ„ì¹˜:** `mindmap.py`

```
1. ìš”ì•½ â†’ JSON ë³€í™˜
   - Gemini 2.5 Flash ì‚¬ìš©
   - í”„ë¡¬í”„íŠ¸: ê³„ì¸µ êµ¬ì¡° JSON ìƒì„±

2. JSON êµ¬ì¡°
   {
     "name": "íšŒì˜ ì „ì²´ ì£¼ì œ",
     "children": [
       {
         "name": "ì£¼ì œ 1",
         "children": [{"name": "ì„¸ë¶€ í•­ëª© 1"}, ...]
       }
     ]
   }

3. SQLite ì €ì¥
   - meeting_minutes í…Œì´ë¸”
   - mindmap_json ì»¬ëŸ¼ì— JSON ì €ì¥
```

**ì½”ë“œ ìœ„ì¹˜:**
- ë§ˆì¸ë“œë§µ ìƒì„±: `mindmap.py:15` `generate_mindmap_from_summary()`

---

### 2.3 ì±—ë´‡ ì§ˆì˜ì‘ë‹µ í”Œë¡œìš° ğŸ¤–

```
[ì‚¬ìš©ì ì§ˆë¬¸] â†’ [ë²¡í„° ê²€ìƒ‰] â†’ [ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±] â†’ [AI ë‹µë³€ ìƒì„±] â†’ [ì‘ë‹µ ë°˜í™˜]
```

#### **ë‹¨ê³„ë³„ ì²˜ë¦¬**

**1) ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥**
```javascript
// static/js/script.js
- ì±—ë´‡ ì‚¬ì´ë“œë°” (Blue Theme, ìš°ì¸¡ ê³ ì •)
- sessionStorageì— ëŒ€í™” ë‚´ì—­ ìë™ ì €ì¥ (ìµœê·¼ 50ê°œ)
- ë¡œê·¸ì•„ì›ƒ ì‹œ ì´ˆê¸°í™”
```

**2) ë²¡í„° ê²€ìƒ‰ (RAG)**
```python
# utils/chat_manager.py:39 search_documents()

1. Similarity Search (2025-11-08 ê°œì„ )
   - ì´ì „: SelfQueryRetriever (LLMì´ í•„í„° ìƒì„±)
   - í˜„ì¬: Similarity Search (ì§ì ‘ ìœ ì‚¬ë„ ê²€ìƒ‰)
   - ì´ìœ : SelfQueryëŠ” ë¶ˆí•„ìš”í•œ LLM í˜¸ì¶œ + ëŠë¦¼

2. ê²€ìƒ‰ ëŒ€ìƒ
   - meeting_chunks: 3ê°œ (ëŒ€í™” ë‚´ìš©)
   - meeting_subtopic: 3ê°œ (ìš”ì•½ ë‚´ìš©)
   - ì´ 6ê°œ ë¬¸ì„œ ê²€ìƒ‰

3. ê¶Œí•œ í•„í„°ë§
   - ë³¸ì¸ì´ ìƒì„±í•œ ë…¸íŠ¸
   - ê³µìœ ë°›ì€ ë…¸íŠ¸
   - Admin: ëª¨ë“  ë…¸íŠ¸
```

**3) ì»¨í…ìŠ¤íŠ¸ í¬ë§·íŒ…**
```python
# utils/chat_manager.py:206 format_context()

=== íšŒì˜ ëŒ€í™” ë‚´ìš© ===
[ë¬¸ì„œ 1]
íšŒì˜: ì‚¬ìíšŒë‹´ íšŒì˜ë¡
ì¼ì‹œ: 2025-11-07 14:30:00
ì‹œê°„: 120ì´ˆ - 180ì´ˆ
ë‚´ìš©:
(ì‹¤ì œ ëŒ€í™” í…ìŠ¤íŠ¸)

=== íšŒì˜ ì£¼ì œë³„ ìš”ì•½ ===
[ìš”ì•½ 1]
íšŒì˜: ì‚¬ìíšŒë‹´ íšŒì˜ë¡
ì¼ì‹œ: 2025-11-07 14:30:00
ì£¼ì œ: í”„ë¡œì íŠ¸ ì¼ì • ì¡°ìœ¨
ë‚´ìš©:
(ìš”ì•½ í…ìŠ¤íŠ¸)
```

**4) AI ë‹µë³€ ìƒì„±**
```python
# utils/chat_manager.py:254 generate_answer()

1. Gemini 2.5 Flash ì‚¬ìš©
   - ëª¨ë¸: "gemini-2.5-flash"
   - Temperature: 0 (ì¼ê´€ëœ ë‹µë³€)

2. í”„ë¡¬í”„íŠ¸ êµ¬ì¡°
   """
   ë‹¹ì‹ ì€ íšŒì˜ë¡ ê¸°ë°˜ ì±—ë´‡ì…ë‹ˆë‹¤.

   [ì¤‘ìš” ê·œì¹™]
   - ê²€ìƒ‰ëœ íšŒì˜ë¡ ì•ˆì—ì„œë§Œ ë‹µë³€
   - ì—†ìœ¼ë©´ "ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ëª…ì‹œ
   - ì‚¬ì „ ì§€ì‹ ì‚¬ìš© ê¸ˆì§€ (í• ë£¨ì‹œë„¤ì´ì…˜ ë°©ì§€)
   - ë©”íƒ€ë°ì´í„° ìš°ì„  (êµ¬ë²„ì „ ì œëª© ë¬´ì‹œ)

   [ê²€ìƒ‰ëœ íšŒì˜ë¡]:
   {context}

   [ì‚¬ìš©ì ì§ˆë¬¸]:
   {query}
   """

3. ì„±ëŠ¥ ì§€í‘œ (2025-11-08 í…ŒìŠ¤íŠ¸)
   - 20ê°œ ì§ˆë¬¸ í…ŒìŠ¤íŠ¸
   - ì„±ê³µë¥ : 100%
   - í‰ê·  ì‘ë‹µ ì‹œê°„: 3.77ì´ˆ
```

**ì½”ë“œ ìœ„ì¹˜:**
- ì±—ë´‡ API: `app.py:824` `/api/chat`
- ê²€ìƒ‰ ë¡œì§: `utils/chat_manager.py:39` `search_documents()`
- ë‹µë³€ ìƒì„±: `utils/chat_manager.py:254` `generate_answer()`

---

### 2.4 ê¶Œí•œ ê´€ë¦¬ í”Œë¡œìš° ğŸ”’

```
[Firebase ë¡œê·¸ì¸] â†’ [í† í° ê²€ì¦] â†’ [ì‚¬ìš©ì ìƒì„±/ì¡°íšŒ] â†’ [ì„¸ì…˜ ì €ì¥] â†’ [ê¶Œí•œ ì²´í¬]
```

#### **ë‹¨ê³„ë³„ ì²˜ë¦¬**

**1) Firebase Google OAuth**
```javascript
// Firebase í´ë¼ì´ì–¸íŠ¸ (í”„ë¡ íŠ¸ì—”ë“œ)
1. Google ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
2. Firebase Auth íŒì—…
3. ID Token ë°œê¸‰
4. ì„œë²„ë¡œ í† í° ì „ì†¡
```

**2) ì„œë²„ í† í° ê²€ì¦**
```python
# utils/firebase_auth.py:43 verify_id_token()

1. Firebase Admin SDKë¡œ í† í° ê²€ì¦
2. ë§Œë£Œ/ìœ„ì¡° í† í° ì°¨ë‹¨
3. ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
   - uid: Firebase ê³ ìœ  ID
   - email: ì´ë©”ì¼
   - name: í‘œì‹œ ì´ë¦„
   - picture: í”„ë¡œí•„ ì‚¬ì§„ URL
```

**3) ì‚¬ìš©ì DB ìƒì„±/ì¡°íšŒ**
```python
# utils/user_manager.py:25 get_or_create_user()

1. users í…Œì´ë¸” ì¡°íšŒ (google_id ê¸°ì¤€)
2. ì—†ìœ¼ë©´ ì‹ ê·œ ìƒì„±
   - role: .env ADMIN_EMAILSì— ìˆìœ¼ë©´ 'admin', ì•„ë‹ˆë©´ 'user'
3. ìˆìœ¼ë©´ ì •ë³´ ì—…ë°ì´íŠ¸ (ì´ë¦„, í”„ë¡œí•„ ì‚¬ì§„)
```

**4) ì„¸ì…˜ ê´€ë¦¬**
```python
# app.py:739 /api/login

session['user_id'] = user['id']
session['user_email'] = user['email']
session['user_name'] = user['name']
session['role'] = user['role']
```

**5) ê¶Œí•œ ì²´í¬ ë°ì½”ë ˆì´í„°**
```python
# utils/decorators.py

@login_required
- ë¡œê·¸ì¸ í•„ìˆ˜
- ë¹„ë¡œê·¸ì¸ ì‹œ â†’ /login ë¦¬ë‹¤ì´ë ‰íŠ¸

@admin_required
- Admin ê¶Œí•œ í•„ìˆ˜
- ì¼ë°˜ ìœ ì € ì‹œ â†’ 403 Forbidden
```

**6) ë…¸íŠ¸ ì ‘ê·¼ ê¶Œí•œ**
```python
# utils/user_manager.py:138 can_access_meeting()

ì¡°ê±´ (OR):
1. ë³¸ì¸ì´ ìƒì„±í•œ ë…¸íŠ¸ (meeting_dialogues.owner_id)
2. ê³µìœ ë°›ì€ ë…¸íŠ¸ (meeting_shares í…Œì´ë¸”)
3. Admin ê¶Œí•œ
```

**ì½”ë“œ ìœ„ì¹˜:**
- ë¡œê·¸ì¸ API: `app.py:739` `/api/login`
- í† í° ê²€ì¦: `utils/firebase_auth.py:43` `verify_id_token()`
- ê¶Œí•œ ì²´í¬: `utils/user_manager.py:138` `can_access_meeting()`

---

## 3. ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### 3.1 SQLite ìŠ¤í‚¤ë§ˆ (database/minute_ai.db)

#### **users í…Œì´ë¸”**
```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    google_id TEXT UNIQUE,           -- Firebase UID
    email TEXT UNIQUE NOT NULL,
    name TEXT,
    profile_picture TEXT,            -- Google í”„ë¡œí•„ ì‚¬ì§„ URL
    role TEXT DEFAULT 'user',        -- 'user' or 'admin'
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### **meeting_dialogues í…Œì´ë¸”**
```sql
CREATE TABLE meeting_dialogues (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    meeting_id TEXT NOT NULL,        -- UUID
    owner_id INTEGER NOT NULL,       -- users.id (FK)
    title TEXT NOT NULL,
    meeting_date TEXT,               -- "YYYY-MM-DD HH:MM:SS"
    audio_file TEXT NOT NULL,        -- íŒŒì¼ëª… (UUID.mp3)
    speaker_label TEXT,              -- "1", "2", ...
    start_time REAL,                 -- ì´ˆ ë‹¨ìœ„
    segment TEXT,                    -- ëŒ€í™” ë‚´ìš©
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (owner_id) REFERENCES users(id)
);
CREATE INDEX idx_meeting_id ON meeting_dialogues(meeting_id);
CREATE INDEX idx_owner_id ON meeting_dialogues(owner_id);
```

#### **meeting_minutes í…Œì´ë¸”**
```sql
CREATE TABLE meeting_minutes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    meeting_id TEXT UNIQUE NOT NULL,
    owner_id INTEGER NOT NULL,       -- users.id (FK)
    title TEXT,
    meeting_date TEXT,
    summary TEXT,                    -- ë¬¸ë‹¨ ìš”ì•½ (ë§ˆí¬ë‹¤ìš´)
    mindmap_json TEXT,               -- ë§ˆì¸ë“œë§µ JSON
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (owner_id) REFERENCES users(id)
);
CREATE INDEX idx_minutes_meeting_id ON meeting_minutes(meeting_id);
```

#### **meeting_shares í…Œì´ë¸”**
```sql
CREATE TABLE meeting_shares (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    meeting_id TEXT NOT NULL,
    owner_id INTEGER NOT NULL,             -- ì†Œìœ ì (ê³µìœ í•œ ì‚¬ëŒ)
    shared_with_user_id INTEGER NOT NULL,  -- ê³µìœ ë°›ì€ ì‚¬ëŒ
    permission TEXT DEFAULT 'read',        -- 'read' (í˜„ì¬ ì½ê¸°ë§Œ ì§€ì›)
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (owner_id) REFERENCES users(id),
    FOREIGN KEY (shared_with_user_id) REFERENCES users(id),
    UNIQUE(meeting_id, shared_with_user_id)  -- ì¤‘ë³µ ê³µìœ  ë°©ì§€
);
```

### 3.2 ChromaDB ì»¬ë ‰ì…˜ êµ¬ì¡°

#### **meeting_chunks ì»¬ë ‰ì…˜**
```
ëª©ì : ëŒ€í™” ë‚´ìš© ìŠ¤ë§ˆíŠ¸ ì²­í‚¹ (RAG ê²€ìƒ‰ìš©)

Document ID: {meeting_id}_chunk_{index}
ì˜ˆ: "meeting_a3f7b2c1_chunk_0"

Metadata:
- meeting_id: "meeting_a3f7b2c1"
- dialogue_id: "meeting_a3f7b2c1_chunk_0"
- chunk_index: 0
- title: "ì‚¬ìíšŒë‹´ íšŒì˜ë¡"
- meeting_date: "2025-11-07 14:30:00"
- audio_file: "a3f7b2c1-...-4n5o.mp3"
- start_time: 0.0
- end_time: 125.3
- speaker_count: 2

Document (ì„ë² ë”©ëœ í…ìŠ¤íŠ¸):
"ì•ˆë…•í•˜ì„¸ìš”. ì˜¤ëŠ˜ íšŒì˜ë¥¼ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.
ì²« ë²ˆì§¸ ì•ˆê±´ì€ í”„ë¡œì íŠ¸ ì¼ì •ì…ë‹ˆë‹¤. ..."
```

#### **meeting_subtopic ì»¬ë ‰ì…˜**
```
ëª©ì : ë¬¸ë‹¨ ìš”ì•½ ì €ì¥ (RAG ê²€ìƒ‰ìš©)

Document ID: {meeting_id}_summary_{index}
ì˜ˆ: "meeting_a3f7b2c1_summary_0"

Metadata:
- meeting_id: "meeting_a3f7b2c1"
- meeting_title: "ì‚¬ìíšŒë‹´ íšŒì˜ë¡"
- meeting_date: "2025-11-07 14:30:00"
- audio_file: "a3f7b2c1-...-4n5o.mp3"
- main_topic: "í”„ë¡œì íŠ¸ ì¼ì • ì¡°ìœ¨"
- summary_index: 0

Document (ì„ë² ë”©ëœ í…ìŠ¤íŠ¸):
"### í”„ë¡œì íŠ¸ ì¼ì • ì¡°ìœ¨
* ìµœì¢… ë§ˆê°ì¼: 11ì›” 15ì¼
* í…ŒìŠ¤íŠ¸ ê¸°ê°„: 11ì›” 10ì¼ ~ 14ì¼
* ë‹´ë‹¹ì: ê¹€ì² ìˆ˜, ì´ì˜í¬"
```

---

## 4. AI ëª¨ë¸ ì‚¬ìš© í˜„í™©

### 4.1 ëª¨ë¸ë³„ ì—­í• 

| ëª¨ë¸ | ìš©ë„ | í˜¸ì¶œ ìœ„ì¹˜ | ì´ìœ  |
|------|------|----------|------|
| **Gemini 2.5 Pro** | STT + ìš”ì•½ ìƒì„± | `utils/stt.py` | ê¸´ ì˜¤ë””ì˜¤ ì²˜ë¦¬ + ê³ í’ˆì§ˆ ìš”ì•½ |
| **Gemini 2.5 Flash** | ì±—ë´‡ + ë§ˆì¸ë“œë§µ | `utils/chat_manager.py`, `mindmap.py` | ë¹ ë¥¸ ì‘ë‹µ ì†ë„ (3ì´ˆëŒ€) |
| **OpenAI Embedding** | ë²¡í„° ì„ë² ë”© | `utils/vector_db_manager.py` | text-embedding-3-small (1536ì°¨ì›) |

### 4.2 API í‚¤ ê´€ë¦¬

```bash
# .env íŒŒì¼
GOOGLE_API_KEY=AIza...          # Gemini API í‚¤
OPENAI_API_KEY=sk-proj-...      # OpenAI API í‚¤
ADMIN_EMAILS=admin@example.com  # Admin ì‚¬ìš©ì ì´ë©”ì¼
```

### 4.3 ë¹„ìš© ìµœì í™”

```
1. Gemini 2.5 Flash ìš°ì„  ì‚¬ìš©
   - ì±—ë´‡: Flash (Pro ëŒ€ë¹„ 20ë°° ì €ë ´)
   - ë§ˆì¸ë“œë§µ: Flash (ë‹¨ìˆœ JSON ë³€í™˜)

2. ìºì‹± ì „ëµ
   - ë²¡í„° ì„ë² ë”©: í•œ ë²ˆë§Œ ìƒì„± (ì¬ì‚¬ìš©)
   - ChromaDB ë¡œì»¬ ì €ì¥ (API í˜¸ì¶œ ì—†ìŒ)

3. ìš”ì²­ ìµœì†Œí™”
   - SelfQuery â†’ Similarity Search ë³€ê²½ (LLM í˜¸ì¶œ ì œê±°)
   - ë°°ì¹˜ ì²˜ë¦¬: ì²­í¬ ë‹¨ìœ„ë¡œ í•œ ë²ˆì— ì„ë² ë”©
```

---

## 5. ë³´ì•ˆ ë° ê¶Œí•œ ê´€ë¦¬

### 5.1 ë³´ì•ˆ ê³„ì¸µ

```
Layer 1: Firebase ì¸ì¦
- Google OAuth 2.0
- ID Token ê²€ì¦ (ì„œë²„ ì‚¬ì´ë“œ)
- ë§Œë£Œ ì‹œê°„ ìë™ ê°±ì‹ 

Layer 2: Flask ì„¸ì…˜
- ì„œë²„ ì‚¬ì´ë“œ ì„¸ì…˜ (ì•ˆì „)
- HTTPS í•„ìˆ˜ (ìš´ì˜ í™˜ê²½)

Layer 3: DB ë ˆë²¨ ê¶Œí•œ
- owner_id í•„ë“œë¡œ ì†Œìœ ê¶Œ í™•ì¸
- meeting_shares í…Œì´ë¸”ë¡œ ê³µìœ  ê´€ë¦¬

Layer 4: ë°ì½”ë ˆì´í„° ì²´í¬
- @login_required: ëª¨ë“  API
- @admin_required: Debug ë©”ë‰´
```


### 5.2 ê¶Œí•œ ë ˆë²¨

```
1. Guest (ë¹„ë¡œê·¸ì¸)
   - ì ‘ê·¼ ë¶ˆê°€ â†’ /login ë¦¬ë‹¤ì´ë ‰íŠ¸

2. User (ì¼ë°˜ ì‚¬ìš©ì)
   - ë³¸ì¸ ë…¸íŠ¸: ì½ê¸°, ìˆ˜ì •, ì‚­ì œ, ê³µìœ 
   - ê³µìœ ë°›ì€ ë…¸íŠ¸: ì½ê¸°ë§Œ ê°€ëŠ¥
   - ì±—ë´‡: ì ‘ê·¼ ê°€ëŠ¥í•œ ë…¸íŠ¸ë§Œ ê²€ìƒ‰

3. Admin (ê´€ë¦¬ì)
   - ëª¨ë“  ë…¸íŠ¸ ì ‘ê·¼ (ì½ê¸°, ìˆ˜ì •, ì‚­ì œ)
   - Debug ë©”ë‰´ ì ‘ê·¼
   - ì‚¬ìš©ì ê´€ë¦¬ (í–¥í›„ êµ¬í˜„ ê°€ëŠ¥)
```

### 5.3 ë°ì´í„° ë³´í˜¸

```
1. íŒŒì¼ ì ‘ê·¼ ì œì–´
   - uploads/ í´ë”: ì§ì ‘ URL ì ‘ê·¼ ë¶ˆê°€
   - Flask send_from_directoryë¡œ ê¶Œí•œ ê²€ì¦ í›„ ì œê³µ

2. SQL Injection ë°©ì§€
   - Parameterized Query ì‚¬ìš©
   - ì˜ˆ: cursor.execute("SELECT * FROM users WHERE id = ?", (user_id,))

3. XSS ë°©ì§€
   - Jinja2 ìë™ ì´ìŠ¤ì¼€ì´í”„
   - ì‚¬ìš©ì ì…ë ¥ í…ìŠ¤íŠ¸ í•„í„°ë§

4. CSRF ë°©ì§€
   - Flask-WTF (í–¥í›„ ì¶”ê°€ ê°€ëŠ¥)
   - í˜„ì¬: SameSite Cookie ì„¤ì •
```

---

## 6. ì„±ëŠ¥ ìµœì í™” ì „ëµ

### 6.1 í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”

```
1. SSE (Server-Sent Events)
   - ì‹¤ì‹œê°„ ì§„í–‰ ìƒíƒœ í‘œì‹œ
   - í´ë§ ëŒ€ë¹„ 50% íŠ¸ë˜í”½ ê°ì†Œ

2. sessionStorage í™œìš©
   - ì±—ë´‡ ëŒ€í™” ë‚´ì—­ (ìµœê·¼ 50ê°œ)
   - ì—…ë¡œë“œ ì§„í–‰ ìƒíƒœ
   - ë¡œê·¸ì•„ì›ƒ ì‹œ ìë™ ì •ë¦¬

3. ì§€ì—° ë¡œë”©
   - Chart.js: ì°¨íŠ¸ íƒ­ ì§„ì… ì‹œ ë¡œë“œ
   - ë§ˆì¸ë“œë§µ ë Œë”ë§: íšŒì˜ë¡ íƒ­ ì§„ì… ì‹œ
```

### 6.2 ë°±ì—”ë“œ ìµœì í™”

```
1. DB ì¸ë±ìŠ¤
   - meeting_id, owner_idì— ì¸ë±ìŠ¤ ìƒì„±
   - ì¿¼ë¦¬ ì†ë„ 10ë°° í–¥ìƒ

2. ë²¡í„° ê²€ìƒ‰ ìµœì í™”
   - Similarity Search (k=3)
   - MMR ë¹„í™œì„±í™” (ë¶ˆí•„ìš”í•œ ë‹¤ì–‘ì„± ì œê±°)

3. íŒŒì¼ ì²˜ë¦¬
   - UUID íŒŒì¼ëª… (ì¶©ëŒ ë°©ì§€)
   - ffmpeg ë©€í‹°ìŠ¤ë ˆë”© (MP4 ë³€í™˜ ì†ë„ 50% í–¥ìƒ)
```

### 6.3 AI í˜¸ì¶œ ìµœì í™”

```
1. ì±—ë´‡ ì‘ë‹µ ì†ë„
   - Gemini 2.5 Flash ì‚¬ìš©
   - í‰ê·  3.77ì´ˆ (2025-11-08 í…ŒìŠ¤íŠ¸)

2. ë°°ì¹˜ ì²˜ë¦¬
   - ì²­í¬ ì„ë² ë”©: 100ê°œì”© ë°°ì¹˜
   - API í˜¸ì¶œ íšŸìˆ˜ 90% ê°ì†Œ

3. ìºì‹±
   - ë²¡í„° ì„ë² ë”©: ChromaDB ì˜êµ¬ ì €ì¥
   - ì¬ì—…ë¡œë“œ ì‹œ ì„ë² ë”© ì¬ì‚¬ìš© ë¶ˆê°€ (ìƒˆ meeting_id)
```

### 6.4 í™•ì¥ì„± ê³ ë ¤

```
í–¥í›„ ê°œì„  ê°€ëŠ¥ í•­ëª©:

1. Redis ìºì‹±
   - ìì£¼ ì¡°íšŒë˜ëŠ” ë…¸íŠ¸ ìºì‹±
   - ì±—ë´‡ ì‘ë‹µ ìºì‹± (ë™ì¼ ì§ˆë¬¸)

2. PostgreSQL ë§ˆì´ê·¸ë ˆì´ì…˜
   - SQLite â†’ PostgreSQL
   - ë™ì‹œ ì ‘ì† 100ëª… ì´ìƒ ëŒ€ì‘

3. ë¹„ë™ê¸° ì²˜ë¦¬
   - Celery + Redis
   - STT/ìš”ì•½ ìƒì„± ë¹„ë™ê¸° ì²˜ë¦¬

4. CDN
   - ì˜¤ë””ì˜¤ íŒŒì¼ S3 + CloudFront
   - ì „ ì„¸ê³„ ë¹ ë¥¸ ì¬ìƒ
```

---

## ğŸ“Œ í•µì‹¬ ìš”ì•½ (30ì´ˆ ë‹µë³€ìš©)

### Q: ì‹œìŠ¤í…œì´ ì–´ë–»ê²Œ ë™ì‘í•˜ë‚˜ìš”?

**A:**
```
1. ì‚¬ìš©ìê°€ ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ ì—…ë¡œë“œ
2. Gemini 2.5 Proë¡œ STT + í™”ì ë¶„ë¦¬
3. ìŠ¤ë§ˆíŠ¸ ì²­í‚¹ (í™”ì/ì‹œê°„ ê¸°ì¤€) â†’ OpenAI ì„ë² ë”©
4. ChromaDBì— ë²¡í„° ì €ì¥ â†’ RAG ê¸°ë°˜ ì±—ë´‡ êµ¬í˜„
5. ë¬¸ë‹¨ ìš”ì•½ + ë§ˆì¸ë“œë§µ ìë™ ìƒì„±
6. Firebase ì¸ì¦ + ê¶Œí•œ ê´€ë¦¬ë¡œ ì•ˆì „í•œ ê³µìœ 
7. í‰ê·  ì‘ë‹µ ì†ë„ 3.77ì´ˆ, ì„±ê³µë¥  100%
```

### Q: ê°€ì¥ í° ê¸°ìˆ ì  ë„ì „ì€?

**A:**
```
1. STT ì •í™•ë„: Gemini 2.5 Proë¡œ 95% ì´ìƒ ë‹¬ì„±
2. ì±—ë´‡ í• ë£¨ì‹œë„¤ì´ì…˜: RAG + ì—„ê²©í•œ í”„ë¡¬í”„íŠ¸ë¡œ ë°©ì§€
3. ì‹¤ì‹œê°„ ì§„í–‰ ìƒíƒœ: SSEë¡œ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
4. ê¶Œí•œ ê´€ë¦¬: Firebase + DB ë ˆë²¨ ì´ì¤‘ ì²´í¬
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

- `next.md`: ì „ì²´ ì¸ìˆ˜ì¸ê³„ ë¬¸ì„œ
- `markdown_folder/ë°œí‘œ_QAì¤€ë¹„/02_ì½”ë“œ_ë¶„ì„_ê°€ì´ë“œë¼ì¸.md`: ì½”ë“œ ìƒì„¸ ë¶„ì„
- `markdown_folder/ë°œí‘œ_QAì¤€ë¹„/03_ì˜ˆìƒ_ì§ˆë¬¸_100ê°œ.md`: ì§ˆì˜ì‘ë‹µ ëŒ€ë¹„

---

**ì‘ì„±ì:** Claude Code
**ìµœì¢… ìˆ˜ì •:** 2025-11-11
**ë²„ì „:** 1.0
