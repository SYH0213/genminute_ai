
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Minute AI{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="app-container">
        <nav class="main-nav">
            <div class="nav-logo">
                <img src="{{ url_for('static', filename='image/logo.png') }}" alt="GenMinute Logo">
            </div>
            <ul class="nav-menu">
                <li class="nav-header">Meeting</li>
                <li class="nav-item" data-page="index"><a href="{{ url_for('index') }}"><span>&#128190;</span> ìƒˆë…¸íŠ¸ ë§Œë“¤ê¸°</a></li>
                <li class="nav-item" data-page="list_notes"><a href="{{ url_for('list_notes') }}"><span>&#128214;</span> ë…¸íŠ¸ ë³´ê¸°</a></li>
                <li class="nav-header">Debug</li>
                <li class="nav-item" data-page="script_input_page"><a href="{{ url_for('script_input_page') }}"><span>&#128196;</span> ìŠ¤í¬ë¦½íŠ¸ì…ë ¥</a></li>
                <li class="nav-item" data-page="retriever_page"><a href="{{ url_for('retriever_page') }}"><span>&#128269;</span> ë¦¬íŠ¸ë¦¬ë²„</a></li>
                <li class="nav-item" data-page="summary_template_page"><a href="{{ url_for('summary_template_page') }}"><span>&#128221;</span> ìš”ì•½/í…œí”Œë¦¿</a></li>
            </ul>
        </nav>

        <div class="content-wrapper">
            {% block content %}{% endblock %}
        </div>

        <!-- Chatbot Toggle Button (when collapsed) -->
        <button class="chatbot-toggle-btn" id="chatbot-toggle-btn" title="AI Chatbot">
            <span class="chatbot-icon">ğŸ¤–</span>
        </button>

        <!-- Chatbot Sidebar -->
        <aside class="chatbot-sidebar" id="chatbot-sidebar">
            <div class="chatbot-header">
                <div class="chatbot-header-left">
                    <span class="chatbot-icon-header">ğŸ¤–</span>
                    <h3>AI Chatbot</h3>
                </div>
                <button class="btn-close-chatbot" id="btn-close-chatbot">&times;</button>
            </div>
            <div class="chatbot-messages" id="chatbot-messages">
                <div class="chatbot-welcome">
                    <div class="chatbot-icon-large">ğŸ¤–</div>
                    <p>ì•ˆë…•í•˜ì„¸ìš”! íšŒì˜ ë‚´ìš©ì— ëŒ€í•´ ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”.</p>
                </div>
            </div>
            <div class="chatbot-input-container">
                <input type="text" id="chatbot-input" class="chatbot-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
                <button id="chatbot-send-btn" class="chatbot-send-btn">ì „ì†¡</button>
            </div>
        </aside>
    </div>
    <script>
        // í˜„ì¬ í˜ì´ì§€ì— ë§ëŠ” ë©”ë‰´ í•­ëª© í™œì„±í™”
        document.addEventListener('DOMContentLoaded', () => {
            const currentPath = window.location.pathname;
            const navItems = document.querySelectorAll('.nav-item');

            // ê²½ë¡œì™€ data-page ë§¤í•‘
            const pathMapping = {
                '/': 'index',
                '/notes': 'list_notes',
                '/script-input': 'script_input_page',
                '/retriever': 'retriever_page',
                '/summary_template': 'summary_template_page'
            };

            // í˜„ì¬ ê²½ë¡œì— ë§ëŠ” data-page ì°¾ê¸°
            let targetPage = pathMapping[currentPath];

            // view í˜ì´ì§€ì¸ ê²½ìš° ë¯¸íŒ…ì—…ë¡œë“œë¥¼ í™œì„±í™”í•˜ì§€ ì•ŠìŒ
            if (currentPath.startsWith('/view/')) {
                targetPage = null;
            }

            // ëª¨ë“  nav-itemì—ì„œ active ì œê±°
            navItems.forEach(item => item.classList.remove('active'));

            // í•´ë‹¹í•˜ëŠ” ë©”ë‰´ í•­ëª©ì— active ì¶”ê°€
            if (targetPage) {
                const targetItem = document.querySelector(`.nav-item[data-page="${targetPage}"]`);
                if (targetItem) {
                    targetItem.classList.add('active');
                }
            }
        });
    </script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    {% block scripts %}{% endblock %}
</body>
</html>
